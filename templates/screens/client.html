<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../styles/client.css" type="text/css">
    <title>Document</title>
</head>
<body>
    <h1>Hello ! {{.Username}}</h1>
    <h2>List of books</h2>
    <!-- <form>
        <input type="text" id="searchBox" name="searchBox"  autofocus><br><br>
    </form>
    <button id = "searchbtn" >Search</button> -->
    <button class="statusbtn" id="reqcheckout" onclick="window.location.href = `/checkout`;" style="background-color: limegreen;"  > Check-Out </button>
    
    <div class="list_container container1">
        
        

        <table class="list_table">
            <thead>
                <tr>
                    <th > "Book Id  "        </th> 
                    <th></th> <th>||</th>
                    <th > "Book Name  "      </th> 
                    <th></th><th>||</th>
                    <th > "Author  "  </th>
                    <th></th><th>||</th>  
                    <th > "Copies  " </th>
                </tr>
            </thead>

            <tbody >
                {{range $i, $entry := .Data}}
                {{if ne $entry.Copies 0}}
                    <tr>
                        <td>{{$entry.BookID}}</td>
                        <td></td>
                        <td>||</td>
                        <td>{{$entry.BookName}}</td>
                        <td></td>
                        <td>||</td>
                        <td>{{$entry.Author}}</td>
                        <td></td>
                        <td>||</td>
                        <td>{{$entry.Copies}}</td>
                        <td>
                            <form id="bookIdForm" style="display: none;">
                                <input type="text" class="inputField" style="display: none;" id="bookId" name="bookId" value="{{$entry.BookID}}" required autofocus><br><br>
                                <input type="text" class="inputField" id="copies" name="copies" style="display: none;" value="{{$entry.Copies}}" required autofocus><br><br>
                            </form>
                        </td>
                        <td></td>
                        <td></td>
                    </tr>
                {{end}}
            {{end}}
          </tbody>
        </table>

    </div>

    <h2 id ="list2">List Of CheckedOut Books</h2>

    <div class="list_container container2">
        
        <table class="list_table">
            <thead>
                <tr>
                    <th > "Request Id  "        </th> 
                    <th></th> <th>||</th>
                    <th > "Date  "      </th> 
                    <th></th><th>||</th>
                    <th > "Book Id  "  </th>
                    <th></th>
                </tr>
            </thead>

            <tbody >
                {{range $i, $reqEntry := .ReqData}}
                <tr>
                    <td>{{$reqEntry.ReqID}}</td>
                    <td></td>
                    <td>||</td>
                    <td>{{$reqEntry.Date}}</td>
                    <td></td>
                    <td>||</td>
                    <td>{{$reqEntry.BookID}}</td>
                    <td></td>
                    <td>
                        {{if eq $reqEntry.Status 1}}
                            <button class="statusbtn" id="reqbtn" style="background-color: white;" onclick="window.location.href = '/checkin';">Requested Check-In</button>
                        {{else if eq $reqEntry.Status -1}}
                            <button class="statusbtn" id="reqbtn" style="background-color: white;" onclick="window.location.href = '/checkout';">Requested Check-Out</button>
                        {{else}}
                            {{with $reqEntry}}
                                <button class="statusbtn" id="reqbtn" onclick="window.location.href = '{{.Link}}';">{{.Status}}</button>
                            {{end}}
                        {{end}}
                    </td>
                </tr>
            {{end}}
            
              </tbody>
        </table>

    </div>
    <button id="logout" onclick="window.location.href = '/logout';"> Log-Out</button>
</body>
<script src="../script/client.js"></script>
</html>